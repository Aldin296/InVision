@page "/allKanbanBoards"
@using InVision.Data
@inject KBoardService service;
@inject NavigationManager NavManager



@if (boards == null)
{
    <p>Loading...</p>
}
else
{
    <RadzenPanel>
        <HeaderTemplate>
            <RadzenText TextStyle="TextStyle.H6" Class="rz-display-flex rz-align-items-center rz-m-0">
                <RadzenIcon Icon="account_box" class="rz-mr-1" /><b>Kanban Boards</b>
            </RadzenText>
        </HeaderTemplate>
        <ChildContent>
            <br />
            <RadzenDataList WrapItems="true" AllowPaging="true" Data="@boards" TItem="KBoard">
                <Template Context="kboard">
                    <RadzenCard Style="width: 250px" @onclick=@OpenKanbanBoard class="kanban-card">
                        <RadzenRow>
                            <RadzenColumn Size="12" class="rz-text-align-start">
                                <RadzenText BadgeStyle="BadgeStyle.Success" TextStyle="TextStyle.H5">@kboard.Name</RadzenText>
                                </RadzenColumn>
                            </RadzenRow>
                            <hr style="border: none; background-color: var(--rz-text-disabled-color); height: 1px; margin: 1rem 0;" />
                            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="1rem">
                                <RadzenStack Gap="0">
                                    <RadzenText TextStyle="TextStyle.Body1">@kboard.Description</RadzenText>
                                    <RadzenText TextStyle="TextStyle.Body2">@kboard.CreatedBy</RadzenText>
                                </RadzenStack>
                            </RadzenStack>
                        </RadzenCard>
                    </Template>
                </RadzenDataList>
            </ChildContent>
        </RadzenPanel>
}



@code {
    List<KBoard> boards;
    protected override async Task OnInitializedAsync()
    {
        boards = await Task.Run(() => service.BoardList());
    }

    private void OpenKanbanBoard()
    {
        NavManager.NavigateTo("/kanbanBoard/lol");
    }
}