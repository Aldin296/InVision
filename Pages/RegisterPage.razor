@layout LoginLayout
@page "/register"

<RadzenCard class="rz-my-12 rz-mx-auto rz-p-4 rz-p-md-12" style="max-width: 600px;">
    <div style="text-align:center;">
        <h2>Login Form</h2>
    </div>

    <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.End" JustifyContent="JustifyContent.Center" Wrap="FlexWrap.Wrap" Gap="1rem" Class="rz-p-sm-7">
        <RadzenFormField Text="Username" Variant="Variant.Flat" style="width: 300px">
            <ChildContent>
                <RadzenTextBox />
            </ChildContent>
        </RadzenFormField>
        <RadzenFormField Text="E-Mail" Variant="Variant.Flat" style="width: 300px">
            <ChildContent>
                <RadzenTextBox />
            </ChildContent>
        </RadzenFormField>
        <RadzenFormField Text="Password" Variant="Variant.Flat" style="width: 300px">
            <ChildContent>
                <RadzenTextBox @bind-Value="@passwordValue" Visible="@(!password)" />
                <RadzenPassword @bind-Value="@passwordValue" Visible="@password" />
            </ChildContent>
            <End>
                <RadzenButton Icon="@(password ? "visibility" : "visibility_off")" Click="TogglePassword" Variant="Variant.Text" Size="ButtonSize.Small" />
            </End>
        </RadzenFormField>
    </RadzenStack>
    <RadzenStack JustifyContent="JustifyContent.Center" Orientation="Orientation.Horizontal">
        <RadzenButton style="width: 150px">Register</RadzenButton>
    </RadzenStack>
    <br />
    <div style="text-align:center;">
        <p>Already have an account? </p>
        <RadzenLink Path=""> Login! </RadzenLink>

    </div>
</RadzenCard>

@code {
    class Model
    {
        public string email { get; set; }
        public string password { get; set; }
    }
    Model model = new Model();

    string email_regex = "^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$";
    string password_regex = "^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$";

    bool email_valid = false;
    bool password_valid = false;

    string password_value = "";
    bool password_visibility = true;

    void TogglePassword()
    {
        password_visibility = !password_visibility;
    }

    void OnSubmit(Model model)
    {
        email_valid = true;
        password_valid = true;
        NavManager.NavigateTo("/index");
        Console.WriteLine("valid submit");
    }

    void OnInvalidSubmit(FormInvalidSubmitEventArgs args)
    {
        email_valid = false;
        password_valid = false;
        Console.WriteLine("invalid submit");
    }
}